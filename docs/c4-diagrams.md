# ğŸ“Š Diagramas C4 - File Share Platform

Este documento contiene los diagramas C4 completos del sistema en diferentes formatos para visualizaciÃ³n.

---

## ğŸ¯ Nivel 1: Diagrama de Contexto del Sistema

El diagrama de contexto muestra el sistema File Share Platform en su entorno, identificando los usuarios y sistemas externos con los que interactÃºa.

```
                                        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                                        â•‘      ğŸ‘¤ Usuario       â•‘
                                        â•‘    [Persona/Actor]    â•‘
                                        â•‘                       â•‘
                                        â•‘ Sube, descarga y      â•‘
                                        â•‘ gestiona archivos     â•‘
                                        â•šâ•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•
                                                    â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚                     â”‚                     â”‚
                              â–¼                     â–¼                     â–¼
               â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
               â•‘  ğŸŒ Frontend React   â•‘  â•‘  ğŸƒ Spring Visualizerâ•‘  â•‘  ğŸ”Œ API Consumers    â•‘
               â•‘    [Web Browser]     â•‘  â•‘    [Web Browser]     â•‘  â•‘   [External Apps]    â•‘
               â•šâ•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•  â•šâ•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•  â•šâ•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•
                          â”‚                         â”‚                         â”‚
                          â”‚       HTTPS/WSS         â”‚      HTTPS              â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â–¼
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        â•‘                                                                                   â•‘
        â•‘                          ğŸ“ FILE SHARE PLATFORM                                   â•‘
        â•‘                            [Software System]                                      â•‘
        â•‘                                                                                   â•‘
        â•‘   Plataforma de gestiÃ³n de archivos que permite subir, procesar, encriptar       â•‘
        â•‘   y descargar archivos de forma segura. Implementa procesamiento asÃ­ncrono       â•‘
        â•‘   con arquitectura de microservicios.                                            â•‘
        â•‘                                                                                   â•‘
        â•‘   CaracterÃ­sticas principales:                                                    â•‘
        â•‘   â€¢ AutenticaciÃ³n JWT                                                            â•‘
        â•‘   â€¢ Procesamiento asÃ­ncrono (Pipes & Filters)                                    â•‘
        â•‘   â€¢ EncriptaciÃ³n RSA de archivos                                                 â•‘
        â•‘   â€¢ APIs REST y SOAP                                                             â•‘
        â•‘   â€¢ ComunicaciÃ³n real-time via WebSocket                                         â•‘
        â•‘                                                                                   â•‘
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚               â”‚               â”‚               â”‚               â”‚
                    â–¼               â–¼               â–¼               â–¼               â–¼
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        â•‘   ğŸ¬ MySQL      â•‘ â•‘   ğŸƒ MongoDB    â•‘ â•‘   ğŸ° RabbitMQ   â•‘ â•‘   ğŸ“¦ MinIO      â•‘ â•‘   ğŸ›ï¸ Consul     â•‘
        â•‘   [Database]    â•‘ â•‘   [Database]    â•‘ â•‘   [Message      â•‘ â•‘   [Object       â•‘ â•‘   [Service      â•‘
        â•‘                 â•‘ â•‘                 â•‘ â•‘    Broker]      â•‘ â•‘    Storage]     â•‘ â•‘    Registry]    â•‘
        â•‘ Usuarios,       â•‘ â•‘ Metadata de     â•‘ â•‘ Colas de        â•‘ â•‘ Almacenamiento  â•‘ â•‘ Registro de     â•‘
        â•‘ archivos,       â•‘ â•‘ archivos        â•‘ â•‘ procesamiento   â•‘ â•‘ de archivos     â•‘ â•‘ servicios       â•‘
        â•‘ transacciones   â•‘ â•‘ procesados      â•‘ â•‘ asÃ­ncrono       â•‘ â•‘ (S3 compatible) â•‘ â•‘ y health checks â•‘
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Leyenda del Diagrama de Contexto

| Elemento | DescripciÃ³n |
|----------|-------------|
| ğŸ‘¤ Usuario | Persona que interactÃºa con el sistema para gestionar archivos |
| ğŸŒ Frontend React | AplicaciÃ³n SPA para usuarios finales |
| ğŸƒ Spring Visualizer | AplicaciÃ³n web de visualizaciÃ³n y monitoreo |
| ğŸ”Œ API Consumers | Aplicaciones externas que consumen las APIs |
| ğŸ“ File Share Platform | Sistema principal (el software que construimos) |
| ğŸ¬ MySQL | Base de datos relacional para datos transaccionales |
| ğŸƒ MongoDB | Base de datos documental para metadata |
| ğŸ° RabbitMQ | Broker de mensajes para procesamiento asÃ­ncrono |
| ğŸ“¦ MinIO | Almacenamiento de objetos compatible con S3 |
| ğŸ›ï¸ Consul | Service discovery y configuraciÃ³n distribuida |

---

## ğŸ—ï¸ Nivel 2: Diagrama de Contenedores

El diagrama de contenedores muestra los contenedores (aplicaciones, servicios, bases de datos) que componen el sistema.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    FILE SHARE PLATFORM                                               â”‚
â”‚                                    [Software System]                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                    CAPA DE PRESENTACIÃ“N                                              â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        ğŸŒ FRONTEND REACT          â”‚           â”‚       ğŸƒ SPRING VISUALIZER        â”‚
    â”‚          [Container]              â”‚           â”‚          [Container]              â”‚
    â”‚                                   â”‚           â”‚                                   â”‚
    â”‚  SPA con React 18 + TypeScript    â”‚           â”‚  Spring Boot 3 + Thymeleaf        â”‚
    â”‚  Vite + TailwindCSS               â”‚           â”‚  WebSocket STOMP                  â”‚
    â”‚  SignalR Client                   â”‚           â”‚  Resilience4j                     â”‚
    â”‚                                   â”‚           â”‚                                   â”‚
    â”‚  Puerto: 3000                     â”‚           â”‚  Puerto: 8080                     â”‚
    â”‚  Nginx serving static files       â”‚           â”‚  Embedded Tomcat                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                                               â”‚
                      â”‚           HTTP/HTTPS + WebSocket              â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                      API GATEWAY                                                     â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚         ğŸšª API GATEWAY            â”‚
                            â”‚           [Container]             â”‚
                            â”‚                                   â”‚
                            â”‚  .NET 8 + YARP Reverse Proxy      â”‚
                            â”‚  JWT Validation Middleware        â”‚
                            â”‚  Rate Limiting                    â”‚
                            â”‚  Request Routing                  â”‚
                            â”‚  Correlation ID Propagation       â”‚
                            â”‚                                   â”‚
                            â”‚  Puerto: 5000                     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚               â”‚               â”‚                     â”‚
        â–¼                     â–¼               â–¼               â–¼                     â–¼

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                   CAPA DE MICROSERVICIOS                                             â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ” AUTH SERVICE   â”‚ â”‚  ğŸ“¤ FILE INGESTION  â”‚ â”‚   ğŸ§¼ SOAP SERVICE   â”‚ â”‚   ğŸŒ REST SERVICE   â”‚
â”‚     [Container]     â”‚ â”‚     [Container]     â”‚ â”‚     [Container]     â”‚ â”‚     [Container]     â”‚
â”‚                     â”‚ â”‚                     â”‚ â”‚                     â”‚ â”‚                     â”‚
â”‚ .NET 8 + JWT        â”‚ â”‚ .NET 8 + SignalR    â”‚ â”‚ .NET 8 + SoapCore   â”‚ â”‚ .NET 8 + Swagger    â”‚
â”‚ BCrypt hashing      â”‚ â”‚ File streaming      â”‚ â”‚ WSDL generation     â”‚ â”‚ OpenAPI 3.0         â”‚
â”‚ Refresh tokens      â”‚ â”‚ Progress events     â”‚ â”‚ Data aggregation    â”‚ â”‚ Presigned URLs      â”‚
â”‚                     â”‚ â”‚ RabbitMQ publish    â”‚ â”‚                     â”‚ â”‚                     â”‚
â”‚ Puerto: 5001        â”‚ â”‚ Puerto: 5002        â”‚ â”‚ Puerto: 5003        â”‚ â”‚ Puerto: 5004 x2     â”‚
â”‚                     â”‚ â”‚                     â”‚ â”‚                     â”‚ â”‚ (Load Balanced)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                       â”‚                       â”‚                       â”‚
           â”‚                       â”‚                       â”‚                       â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                   CAPA DE PROCESAMIENTO                                              â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚         âš™ï¸ FILE PROCESSING PIPELINE           â”‚
                        â”‚                [Container]                    â”‚
                        â”‚                                               â”‚
                        â”‚  .NET 8 Worker Service (BackgroundService)    â”‚
                        â”‚  RabbitMQ Consumer                            â”‚
                        â”‚  Pipes & Filters Pattern                      â”‚
                        â”‚  RSA 2048-bit Encryption                      â”‚
                        â”‚  SHA-256 Hashing                              â”‚
                        â”‚                                               â”‚
                        â”‚  Filters:                                     â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                        â”‚  â”‚Metadataâ”‚â”‚  Hash  â”‚â”‚Encrypt â”‚â”‚ Upload â”‚    â”‚
                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                        â”‚                                               â”‚
                        â”‚  No expuesto externamente (Worker)            â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                      CAPA DE DATOS                                                   â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ğŸ¬ MYSQL         â”‚ â”‚    ğŸƒ MONGODB       â”‚ â”‚    ğŸ° RABBITMQ      â”‚ â”‚    ğŸ“¦ MINIO         â”‚
â”‚   CLUSTER           â”‚ â”‚   REPLICA SET       â”‚ â”‚   [Container]       â”‚ â”‚   [Container]       â”‚
â”‚                     â”‚ â”‚                     â”‚ â”‚                     â”‚ â”‚                     â”‚
â”‚ mysql-writer        â”‚ â”‚ mongodb-primary     â”‚ â”‚ RabbitMQ 3.12       â”‚ â”‚ MinIO Latest        â”‚
â”‚ mysql-replica1      â”‚ â”‚ mongodb-secondary1  â”‚ â”‚ Management Plugin   â”‚ â”‚ S3 Compatible       â”‚
â”‚ mysql-replica2      â”‚ â”‚ mongodb-secondary2  â”‚ â”‚                     â”‚ â”‚                     â”‚
â”‚ + ProxySQL          â”‚ â”‚                     â”‚ â”‚ Exchange: direct    â”‚ â”‚ Buckets:            â”‚
â”‚                     â”‚ â”‚ ReplicaSet: rs0     â”‚ â”‚ Queue: documents    â”‚ â”‚ - original-files    â”‚
â”‚ Puertos: 3307-3309  â”‚ â”‚ Puertos: 27017-19   â”‚ â”‚ Puerto: 5672/15672  â”‚ â”‚ - encrypted-files   â”‚
â”‚ ProxySQL: 6033      â”‚ â”‚                     â”‚ â”‚                     â”‚ â”‚ Puertos: 9000/9001  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚         ğŸ›ï¸ CONSUL                 â”‚
                            â”‚           [Container]             â”‚
                            â”‚                                   â”‚
                            â”‚  HashiCorp Consul 1.17            â”‚
                            â”‚  Service Discovery                â”‚
                            â”‚  Health Checks                    â”‚
                            â”‚  KV Store                         â”‚
                            â”‚                                   â”‚
                            â”‚  Puerto: 8500                     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚         âš–ï¸ NGINX LB               â”‚
                            â”‚           [Container]             â”‚
                            â”‚                                   â”‚
                            â”‚  Nginx 1.25 Alpine                â”‚
                            â”‚  Load Balancer para REST Service  â”‚
                            â”‚  Round-robin strategy             â”‚
                            â”‚                                   â”‚
                            â”‚  Puerto: 8084                     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### TecnologÃ­as por Contenedor

| Contenedor | TecnologÃ­a | Framework | Base de Datos |
|------------|------------|-----------|---------------|
| Frontend React | TypeScript | React 18 + Vite | - |
| Spring Visualizer | Java 17 | Spring Boot 3 | - |
| API Gateway | C# | .NET 8 + YARP | - |
| Auth Service | C# | .NET 8 + ASP.NET Core | MySQL |
| File Ingestion | C# | .NET 8 + SignalR | MySQL, RabbitMQ |
| SOAP Service | C# | .NET 8 + SoapCore | MySQL, MongoDB |
| REST Service | C# | .NET 8 + Swagger | MongoDB, MinIO |
| Processing Pipeline | C# | .NET 8 Worker | MongoDB, MySQL, MinIO |

---

## ğŸ” Nivel 3: Diagrama de Componentes

### Auth Service - Componentes Detallados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    AUTH SERVICE                                                      â”‚
â”‚                                    Puerto: 5001                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                      API LAYER                                                       â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”ƒ
â”ƒ  â”‚  â”‚   ğŸ“‹ AuthController    â”‚  â”‚   ğŸ’š HealthController  â”‚  â”‚   ğŸ”’ JwtMiddleware     â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚                        â”‚  â”‚                        â”‚  â”‚                        â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ POST /api/auth/registerâ”‚  â”‚ GET /health            â”‚  â”‚ ValidateToken()        â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ POST /api/auth/login   â”‚  â”‚ GET /health/ready      â”‚  â”‚ ExtractClaims()        â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ POST /api/auth/refresh â”‚  â”‚ GET /health/live       â”‚  â”‚ AddToContext()         â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ GET /api/auth/validate â”‚  â”‚                        â”‚  â”‚                        â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”ƒ
â”ƒ  â”‚              â”‚                                                                                  â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¼â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                  â”‚
                  â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                   APPLICATION LAYER                                                  â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”ƒ
â”ƒ  â”‚  â”‚   ğŸ‘¤ AuthService       â”‚  â”‚   ğŸ”‘ JwtService        â”‚  â”‚   ğŸ” PasswordService   â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚   [IAuthService]       â”‚  â”‚   [IJwtService]        â”‚  â”‚   [IPasswordService]   â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚                        â”‚  â”‚                        â”‚  â”‚                        â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ RegisterAsync()        â”‚  â”‚ GenerateToken()        â”‚  â”‚ HashPassword()         â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ LoginAsync()           â”‚  â”‚ ValidateToken()        â”‚  â”‚ VerifyPassword()       â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ RefreshTokenAsync()    â”‚  â”‚ GetPrincipal()         â”‚  â”‚ GenerateSalt()         â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ ValidateTokenAsync()   â”‚  â”‚ ExtractUserId()        â”‚  â”‚                        â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”ƒ
â”ƒ  â”‚              â”‚                                                                                  â”‚ â”ƒ
â”ƒ  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚ â”ƒ
â”ƒ  â”‚  â”‚   ğŸ“ RegisterValidator â”‚  â”‚   ğŸ“ LoginValidator    â”‚                                         â”‚ â”ƒ
â”ƒ  â”‚  â”‚   [FluentValidation]   â”‚  â”‚   [FluentValidation]   â”‚                                         â”‚ â”ƒ
â”ƒ  â”‚  â”‚                        â”‚  â”‚                        â”‚                                         â”‚ â”ƒ
â”ƒ  â”‚  â”‚ Email format           â”‚  â”‚ Required fields        â”‚                                         â”‚ â”ƒ
â”ƒ  â”‚  â”‚ Password strength      â”‚  â”‚ Email format           â”‚                                         â”‚ â”ƒ
â”ƒ  â”‚  â”‚ Required fields        â”‚  â”‚                        â”‚                                         â”‚ â”ƒ
â”ƒ  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚ â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¼â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                  â”‚
                  â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                     DOMAIN LAYER                                                     â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”ƒ
â”ƒ  â”‚  â”‚   ğŸ‘¤ User              â”‚  â”‚   ğŸ”„ RefreshToken      â”‚  â”‚   ğŸ“‹ IUserRepository   â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚   [Entity]             â”‚  â”‚   [Entity]             â”‚  â”‚   [Interface]          â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚                        â”‚  â”‚                        â”‚  â”‚                        â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ Guid Id                â”‚  â”‚ Guid Id                â”‚  â”‚ GetByIdAsync()         â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ string Email           â”‚  â”‚ string Token           â”‚  â”‚ GetByEmailAsync()      â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ string PasswordHash    â”‚  â”‚ Guid UserId            â”‚  â”‚ CreateAsync()          â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ string FirstName       â”‚  â”‚ DateTime ExpiresAt     â”‚  â”‚ UpdateAsync()          â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ string LastName        â”‚  â”‚ bool IsRevoked         â”‚  â”‚ ExistsAsync()          â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ DateTime CreatedAt     â”‚  â”‚ DateTime CreatedAt     â”‚  â”‚                        â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ bool IsActive          â”‚  â”‚                        â”‚  â”‚                        â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”ƒ
â”ƒ  â”‚                                                                      â”‚                          â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¼â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                                                          â”‚
                                                                          â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                  INFRASTRUCTURE LAYER                                                â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”ƒ
â”ƒ  â”‚  â”‚   ğŸ—„ï¸ UserRepository    â”‚  â”‚   ğŸ›ï¸ ConsulService     â”‚  â”‚   ğŸ’¾ AppDbContext      â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚   [Repository]         â”‚  â”‚   [External Service]   â”‚  â”‚   [EF Core]            â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚                        â”‚  â”‚                        â”‚  â”‚                        â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ Implements             â”‚  â”‚ RegisterService()      â”‚  â”‚ DbSet<User>            â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ IUserRepository        â”‚  â”‚ DeregisterService()    â”‚  â”‚ DbSet<RefreshToken>    â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚ Uses AppDbContext      â”‚  â”‚ GetServices()          â”‚  â”‚                        â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â”‚                        â”‚  â”‚ HealthReporting()      â”‚  â”‚ MySQL Provider         â”‚            â”‚ â”ƒ
â”ƒ  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                              â”‚
                                              â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚         ğŸ¬ MySQL              â”‚
                              â”‚         [Database]            â”‚
                              â”‚                               â”‚
                              â”‚    Tables: Users,             â”‚
                              â”‚    RefreshTokens              â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### File Processing Pipeline - Componentes Detallados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FILE PROCESSING PIPELINE                                                â”‚
â”‚                              Worker Service (Background)                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                  MESSAGE CONSUMER LAYER                                              â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”ƒ
â”ƒ  â”‚  â”‚                           ğŸ° FileProcessingConsumer                                      â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚                              [BackgroundService]                                         â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                                                          â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚   â€¢ Subscribe to RabbitMQ queue "documents"                                              â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚   â€¢ Deserialize FileUploadedMessage                                                      â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚   â€¢ Create FileContext with metadata                                                     â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚   â€¢ Execute Pipeline                                                                     â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚   â€¢ Handle success/failure                                                               â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚   â€¢ Acknowledge message                                                                  â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                                                          â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                              â”‚
                                              â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                   PIPELINE ENGINE LAYER                                              â”ƒ
â”ƒ                              (Pipes & Filters Pattern Implementation)                                â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                     â”‚ â”ƒ
â”ƒ  â”‚  â”‚   ğŸ”§ PipelineEngine    â”‚                                                                     â”‚ â”ƒ
â”ƒ  â”‚  â”‚   [Orchestrator]       â”‚                                                                     â”‚ â”ƒ
â”ƒ  â”‚  â”‚                        â”‚                                                                     â”‚ â”ƒ
â”ƒ  â”‚  â”‚ ExecuteAsync(context)  â”‚                                                                     â”‚ â”ƒ
â”ƒ  â”‚  â”‚ RegisterFilter(filter) â”‚                                                                     â”‚ â”ƒ
â”ƒ  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                     â”‚ â”ƒ
â”ƒ  â”‚              â”‚                                                                                  â”‚ â”ƒ
â”ƒ  â”‚              â–¼                                                                                  â”‚ â”ƒ
â”ƒ  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                    PIPELINE FLOW                                        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                                                         â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚  â”‚ ğŸ“ Metadata    â”‚â”€â”€â–ºâ”‚ #ï¸âƒ£ Hash        â”‚â”€â”€â–ºâ”‚ ğŸ” Encrypt     â”‚â”€â”€â–ºâ”‚ ğŸ”“ Decrypt     â”‚     â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚  â”‚   Filter       â”‚   â”‚   Filter       â”‚   â”‚   Filter       â”‚   â”‚   Filter       â”‚     â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚  â”‚                â”‚   â”‚                â”‚   â”‚                â”‚   â”‚                â”‚     â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚  â”‚ Extract:       â”‚   â”‚ Compute:       â”‚   â”‚ Encrypt with:  â”‚   â”‚ Validate:      â”‚     â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚  â”‚ - FileType     â”‚   â”‚ - SHA-256      â”‚   â”‚ - RSA 2048     â”‚   â”‚ - Decrypt      â”‚     â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚  â”‚ - Size         â”‚   â”‚ - Store hash   â”‚   â”‚ - Hybrid       â”‚   â”‚ - Compare      â”‚     â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚  â”‚ - MIME         â”‚   â”‚   in MySQL     â”‚   â”‚   encryption   â”‚   â”‚ - Verify       â”‚     â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚  â”‚                â”‚   â”‚                â”‚   â”‚                â”‚   â”‚   integrity    â”‚     â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚  â”‚ Store:MongoDB  â”‚   â”‚                â”‚   â”‚                â”‚   â”‚                â”‚     â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                                         â”‚              â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                                         â–¼              â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â”‚ ğŸ“¤ Upload      â”‚        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â”‚   Filter       â”‚        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â”‚                â”‚        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â”‚ Upload to:     â”‚        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â”‚ - original-    â”‚        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â”‚   files bucket â”‚        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â”‚ - encrypted-   â”‚        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â”‚   files bucket â”‚        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â”‚                â”‚        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â”‚ Update MySQL:  â”‚        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â”‚ status=Done    â”‚        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                                                         â”‚   â”‚ â”ƒ
â”ƒ  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                              â”‚
                                              â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                  INFRASTRUCTURE LAYER                                                â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”ƒ
â”ƒ  â”‚  â”‚ ğŸ° RabbitMQ      â”‚  â”‚ ğŸƒ MongoDB       â”‚  â”‚ ğŸ¬ MySQL         â”‚  â”‚ ğŸ“¦ MinIO         â”‚        â”‚ â”ƒ
â”ƒ  â”‚  â”‚   Connection     â”‚  â”‚   Repository     â”‚  â”‚   Repository     â”‚  â”‚   Client         â”‚        â”‚ â”ƒ
â”ƒ  â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚        â”‚ â”ƒ
â”ƒ  â”‚  â”‚ Consume()        â”‚  â”‚ SaveMetadata()   â”‚  â”‚ UpdateStatus()   â”‚  â”‚ UploadFile()     â”‚        â”‚ â”ƒ
â”ƒ  â”‚  â”‚ Acknowledge()    â”‚  â”‚ UpdateMetadata() â”‚  â”‚ GetFile()        â”‚  â”‚ GetPresignedUrl()â”‚        â”‚ â”ƒ
â”ƒ  â”‚  â”‚ Reject()         â”‚  â”‚                  â”‚  â”‚ SaveHash()       â”‚  â”‚                  â”‚        â”‚ â”ƒ
â”ƒ  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”ƒ
â”ƒ  â”‚  â”‚                              ğŸ” RSA Encryption Service                                   â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                                                          â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚   EncryptWithPublicKey(data)        DecryptWithPrivateKey(data)                          â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚   LoadPublicKey(path)               LoadPrivateKey(path)                                 â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚                                                                                          â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â”‚   Keys location: /app/keys/public.pem, /app/keys/private.pem                             â”‚  â”‚ â”ƒ
â”ƒ  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”ƒ
â”ƒ  â”‚                                                                                                 â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›


PIPELINE STATES (Estado del procesamiento):

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Received     â”‚  â†  Mensaje recibido de RabbitMQ
  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ MetadataStored â”‚  â†  Metadata guardada en MongoDB
  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    Hashed      â”‚  â†  Hash SHA-256 calculado y guardado
  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Encrypted    â”‚  â†  Archivo encriptado con RSA
  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Decrypted     â”‚  â†  ValidaciÃ³n de integridad completada
  â”‚  Validated     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ UploadedTo     â”‚  â†  Archivos subidos a MinIO
  â”‚    MinIO       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Completed    â”‚  â†  Procesamiento exitoso
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    Failed      â”‚  â†  Error en cualquier etapa
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— Interacciones entre Componentes

### Flujo de Upload de Archivo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Usuario â”‚     â”‚   Frontend  â”‚     â”‚   API Gateway   â”‚     â”‚   Auth     â”‚     â”‚  File Ingestion   â”‚
â”‚          â”‚     â”‚   React     â”‚     â”‚     (YARP)      â”‚     â”‚  Service   â”‚     â”‚     Service       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                  â”‚                     â”‚                    â”‚                      â”‚
     â”‚ 1. Select file   â”‚                     â”‚                    â”‚                      â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                     â”‚                    â”‚                      â”‚
     â”‚                  â”‚                     â”‚                    â”‚                      â”‚
     â”‚                  â”‚ 2. POST /api/files  â”‚                    â”‚                      â”‚
     â”‚                  â”‚   + JWT + File      â”‚                    â”‚                      â”‚
     â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚                      â”‚
     â”‚                  â”‚                     â”‚                    â”‚                      â”‚
     â”‚                  â”‚                     â”‚ 3. Validate JWT    â”‚                      â”‚
     â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                      â”‚
     â”‚                  â”‚                     â”‚                    â”‚                      â”‚
     â”‚                  â”‚                     â”‚ 4. JWT Valid âœ“     â”‚                      â”‚
     â”‚                  â”‚                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚
     â”‚                  â”‚                     â”‚                    â”‚                      â”‚
     â”‚                  â”‚                     â”‚ 5. Forward request â”‚                      â”‚
     â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                  â”‚                     â”‚                    â”‚                      â”‚
     â”‚                  â”‚ 6. SignalR: Progressâ”‚                    â”‚                      â”‚
     â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚ 7. Show progress â”‚                     â”‚                    â”‚                      â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                    â”‚                      â”‚
     â”‚                  â”‚                     â”‚                    â”‚                      â”‚
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File Ingestion   â”‚     â”‚  RabbitMQ  â”‚     â”‚  Processing Pipeline  â”‚
â”‚     Service       â”‚     â”‚            â”‚     â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                     â”‚                        â”‚
          â”‚ 8. Publish message  â”‚                        â”‚
          â”‚ (file.uploaded)     â”‚                        â”‚
          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
          â”‚                     â”‚                        â”‚
          â”‚                     â”‚ 9. Consume message     â”‚
          â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
          â”‚                     â”‚                        â”‚
          â”‚                     â”‚                        â”‚ 10. Execute Pipeline:
          â”‚                     â”‚                        â”‚     - Metadata â†’ MongoDB
          â”‚                     â”‚                        â”‚     - Hash â†’ MySQL
          â”‚                     â”‚                        â”‚     - Encrypt â†’ RSA
          â”‚                     â”‚                        â”‚     - Upload â†’ MinIO
          â”‚                     â”‚                        â”‚
          â”‚                     â”‚ 11. Acknowledge        â”‚
          â”‚                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
          â”‚                     â”‚                        â”‚
```

---

## ğŸ“¦ TecnologÃ­as Utilizadas

| CategorÃ­a | TecnologÃ­a | VersiÃ³n |
|-----------|------------|---------|
| **Backend** | .NET | 8.0 |
| **Frontend** | React | 18.x |
| **Frontend** | TypeScript | 5.x |
| **Java** | Spring Boot | 3.x |
| **Base de Datos** | MySQL | 8.0 |
| **Base de Datos** | MongoDB | 7.0 |
| **MensajerÃ­a** | RabbitMQ | 3.12 |
| **Storage** | MinIO | Latest |
| **Service Discovery** | Consul | 1.17 |
| **Load Balancer** | Nginx | 1.25 |
| **Containerization** | Docker | 24.x |
| **Orchestration** | Docker Compose | 2.x |
